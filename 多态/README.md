# C++ 多态（Polymorphism）

**核心定位**：C++ 中的多态特性，同时掌握它在实际开发中的典型应用场景，这是 C++ 面向对象编程（OOP）的核心知识点 —— 多态的本质是 **"一个接口，多种实现"**，能让代码更灵活、易扩展。

## 一、多态核心概念

### 1. 定义

**多态（Polymorphism）** 指同一行为作用于不同对象上，会产生不同的执行结果。C++ 中多态分为两类：

- **静态多态（编译期多态）**：由函数重载、模板实现，编译器在编译阶段确定调用哪个函数
- **动态多态（运行期多态）**：由虚函数（`virtual`）+ 继承 + 父类指针/引用指向子类对象实现，程序运行时才确定调用哪个函数（**核心重点**）

### 2. 动态多态的核心条件（缺一不可）

1. **存在继承关系**（父类和子类）
2. **父类中声明虚函数**（`virtual` 修饰），子类重写（`override`）该虚函数
3. **通过父类指针/引用调用虚函数**（直接用子类对象调用不会触发多态）

## 二、静态多态 vs 动态多态对比

| 对比维度 | 静态多态（编译期） | 动态多态（运行期） |
|---------|-----------------|-----------------|
| **实现方式** | 函数重载、模板 | 虚函数 + 继承 |
| **确定时机** | 编译时 | 运行时 |
| **性能** | 无运行时开销 | 有虚函数表（vtable）开销 |
| **灵活性** | 较低（编译时固定） | 高（运行时动态绑定） |
| **典型应用** | 函数重载、模板特化 | 接口抽象、插件系统 |

## 三、动态多态的优势

1. **代码复用**：通过基类接口统一处理不同子类
2. **易于扩展**：新增子类无需修改现有代码
3. **接口抽象**：隐藏具体实现细节，提高代码可维护性

## 四、注意事项

- 虚函数必须通过**指针或引用**调用才能触发多态
- 直接用对象调用虚函数不会触发多态（静态绑定）
- 构造函数不能是虚函数
- 析构函数建议声明为虚函数（确保正确释放资源）

